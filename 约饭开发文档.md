
# 约饭开发文档

主要功能描述

React Native 开发的iOS和安卓App 
## 登陆页
微信登陆 调用微信API 

调用API后与后台交互，用户授权后，可以获取用户基本信息，包括头像、昵称、性别、地区。直接采取微信的昵称和头像，个人信息页面提供以上信息更改的功能。

### 首次登陆 
取得微信授权后，要求用户输入邮箱，显示微信的默认用户信息，询问用户是否直接保存，提供修改功能。 
### 普通登陆 
直接微信登陆

## 主页
### 按条显示约饭内容

首先获取用户位置信息，然后发送给后台，后台返回1公里范围内的可约饭条目。如果无法获取用户位置信息如何处理，是否让用户手动选取。

是返回所有约饭的条目，还是只返回尚未预约的条目。

避免一次请求过多，使用懒加载。

## 个人信息页
### 用户头像
后台保存200*200像素的图片，支持png，jpg，bmp格式。可以支持gif，但不支持动图。
### 用户昵称
中英文长度2-8个字符，特殊符号支持 _  
### 用户发布的内容
按发布时间由近到远 从上到下显示内容。
### 用户预约的内容
加入及时聊天功能，网易API

### 信息修改页
头像修改 昵称修改 
## 约饭发布页
### 时间
时间选取方式
### 地点 
地图API选取地点
 
## 引导逻辑
用户打开是首先显示主页还是首先显示登陆

## UI设计是个头疼的问题



## 后端
*加密这一块...先不做吧??我还没用过https/AES/RSA*

### 饭局数据库
1. 发布人
2. 应邀人
3. 地点
4. 时间
5. 饭局ID

### 个人信息数据库
1. 用户名
2. 密码
3. 头像(本地文件的路径 & 文件名随机化)
4. 历史未读聊天内容(即时聊天...再说吧)
5. 能有微信号啥的吗...(不了解)
6. 个性签名


### GET
* BasicInfo(B)
> 功能: 获取用户基本信息
> 参数: 用户名
> 返回值: TRUE & 用户的基本信息(用户名/头像<只是一个URL需要再次单独请求>/个签)
> FALSE

* AppointmentBegin(AB)
> 功能: 获取已发布饭局信息
> 参数: 起始条数. 后端会返回自起始条数起往后50条的信息
> 返回值: TRUE & 已发布的饭局
> FALSE

* AlterMotto(AM)
> 功能: 修改个性签名
> 参数: 新的个性签名
> 返回值: TRUE 
> FALSE

* AlterPass(AP)
> 功能: 修改密码
> 参数: 新密码
> 返回值: TRUE
> FALSE

* CancleAppointment(CA)
> 功能: 取消饭局
> 参数: 饭局ID
> 返回值: TRUE & 如果是发布人则删除这个饭局
> FALSE

### POST
* UploadAvatar(UA)
> 功能: 上传用户的头像
> 参数: 无. 只上传当前用户的头像信息 & 如果已经存在则替换
> 数据: 用户头像
> 返回值: TRUE
> FALSE

* ChatWith(CW)
> 功能: 与某人聊天
> 参数: 某人的用户名
> 数据: 聊天内容(暂时...不支持emoji吧)
> 返回值: 0(成功)
> 1(不在线)
> 2(其他原因)


* PublishAppointment(PA)
> 功能: 发布饭局
> 参数: 无
> 数据: 时间
> 地点
> 返回值: TRUE
> FALSE